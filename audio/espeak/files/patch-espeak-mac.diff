--- Makefile.org	2014-02-02 17:58:11.000000000 +0700
+++ Makefile	2020-06-23 13:53:04.000000000 +0700
@@ -10,13 +10,13 @@
 RELEASE = 1.48
 BIN_NAME = speak
 BIN2_NAME = espeak
-LIB_NAME = libespeak.so
+LIB_NAME = libespeak.dylib
 STATIC_LIB_NAME = libespeak.a
 LIB_VERSION = 1
 LIBTAG = $(LIB_VERSION).$(RELEASE)
 
 # Use SONAME_OPT=-Wl,h, on Solaris
-SONAME_OPT=-Wl,-soname,
+SONAME_OPT=-Wl,-install_name,
 
 # Use EXTRA_LIBS=-lm on Solaris
 EXTRA_LIBS =
@@ -114,11 +114,8 @@
 	-I. -D LIBRARY -c -fno-exceptions  $<  -o x_$*.o
 
 $(LIB_NAME): $(OBJS2)
-	$(CXX) $(LDFLAGS) -shared $(SONAME_OPT)$(LIB_NAME).$(LIB_VERSION) -o $@ \
+	$(CXX) $(LDFLAGS) -shared $(SONAME_OPT)$(LIB_NAME) -o $@ \
 	$(OBJS2) $(LIBS2)
-	mv $(LIB_NAME) $(LIB_NAME).$(LIBTAG)
-	$(LN_SF) $(LIB_NAME).$(LIBTAG) $(LIB_NAME).$(LIB_VERSION)
-	$(LN_SF) $(LIB_NAME).$(LIB_VERSION) $(LIB_NAME)
 
 $(STATIC_LIB_NAME): $(OBJS2)
 	$(AR) cqs $(STATIC_LIB_NAME) $(OBJS2)
@@ -138,14 +135,14 @@
 	$(MKDIR) $(DESTDIR)$(LIBDIR)
 	$(MKDIR) $(DESTDIR)$(INCDIR)
 	$(MKDIR) $(DESTDIR)$(DATADIR)
+	# Install speak executable
+	$(INSTALL) -m 755 $(BIN_NAME) $(DESTDIR)$(BINDIR)
 	# Install espeak executable
 	$(INSTALL) -m 755 $(BIN2_NAME) $(DESTDIR)$(BINDIR)
 	# Install shared library
-	$(INSTALL) -m 755 $(LIB_NAME).$(LIBTAG) $(DESTDIR)$(LIBDIR)
+	$(INSTALL) -m 755 $(LIB_NAME) $(DESTDIR)$(LIBDIR)
 	# Install static library
 	$(INSTALL) -m 755 $(STATIC_LIB_NAME) $(DESTDIR)$(LIBDIR)
-	$(LN_SF) $(LIB_NAME).$(LIBTAG) $(DESTDIR)$(LIBDIR)/$(LIB_NAME).$(LIB_VERSION)
-	$(LN_SF) $(LIB_NAME).$(LIB_VERSION) $(DESTDIR)$(LIBDIR)/$(LIB_NAME)
 	# Install development headers
 	$(INSTALL) -pm 644 speak_lib.h $(DESTDIR)$(INCDIR)
 	# Install data files
--- speech.h.org	2014-03-04 23:47:15.000000000 +0700
+++ speech.h	2020-06-23 13:28:19.000000000 +0700
@@ -47,7 +47,7 @@
 //#define ESPEAK_API  extern "C"
 
 #ifdef LIBRARY
-#define USE_ASYNC
+//#define USE_ASYNC
 #endif
 
 #ifdef _ESPEAKEDIT
--- synthdata.cpp.org	2014-03-04 23:47:15.000000000 +0700
+++ synthdata.cpp	2020-06-23 13:29:39.000000000 +0700
@@ -35,7 +35,7 @@
 #include "translate.h"
 #include "wave.h"
 
-const char *version_string = "1.48.03  04.Mar.14";
+const char *version_string = "1.48.04  06.04.2014";
 const int version_phdata  = 0x014801;
 
 int option_device_number = -1;
